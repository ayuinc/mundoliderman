{if logged_out}
  {redirect="login"}
{/if}

{embed=includes/head titulo="Mundo Liderman - Tareo"}
<link rel="stylesheet" type="text/css" href="{site_url}frontend/app/assets/css/calendar.css">
<link rel="stylesheet" type="text/css" href="{site_url}frontend/app/assets/css/custom_2.css">
<script src="{site_url}frontend/app/assets/js/modernizr.custom.63321.js"></script>
  
  <div class="site-wrapper"> <!-- Body -->
    {embed=includes/nav-main}
    <main class="site-content pb-42 mb-0-xs">
      {embed=includes/menu-movil}
      {embed=includes/banner-alerta}
      <div class="box-gray bg-gray-darker w-100 hidden-lg hdden-md"></div>
      <div class="container-md clearfix">
        <section id="menu-vertical" class="col-md-4 pr-42 pl-0 hidden-xs hidden-sm">
          {embed=includes/nav-secciones miembro="{segment_3}" miembro_actual="{member_id}" grupo="{member_group}"}
        </section>
        <section id="tareo-contenido" class="col-md-8 pb-42 ph-7-xs">
          <div class="container pt-42 w-100 ph-0">
            {embed=includes/perfil-servicios miembro="{segment_3}" miembro_actual="{member_id}"}
            {embed=includes/semaforo-movil}
            <h2 class="fz-30 border-bottom-gray pb-7 text-gray-darker pt-14">Tareo</h2>
            {embed=includes/semaforo}
            <div class="tareo">
              <div class="datos bg-white pv-42 ph-42 mt-42 ph-0-xs">
                <div class="ph-21">
                  <span class="fz-16 text-gray-darker hidden-xs hidden-sm">Buscar el periodo</span>
                  <span class="fz-18 text-gray-darker hidden-lg hidden-md">Buscar el periodo</span>
                  <div class="select-group display-ib ml-21 ml-0-xs">
                    <div class="display-ib text-center ph-7 relative">
                      <select name="" id="monthCollection" class="borderless relative">
                        <option value="0" class="fz-14">En</option>
                        <option value="1" class="fz-14">Feb</option>
                        <option value="2" class="fz-14">Mar</option>
                        <option value="3" class="fz-14">Abr</option>
                        <option value="4" class="fz-14">May</option>
                        <option value="5" class="fz-14">Jun</option>
                        <option value="6" class="fz-14">Jul</option>
                        <option value="7" class="fz-14">Agos</option>
                        <option value="8" class="fz-14">Set</option>
                        <option value="9" class="fz-14">Oct</option>
                        <option value="10" class="fz-14">Nov</option>
                        <option value="11" class="fz-14">Dic</option>
                      </select>
                      <img src="{site_url}frontend/app/assets/img/Flecha_Abajo.png" alt="">
                    </div>
                    <div class="display-ib text-center ph-7 relative ml-14 ml-0-xs">
                      <select name="" id="yearCollection" class="borderless relative">
                      </select>
                      <img src="{site_url}frontend/app/assets/img/Flecha_Abajo.png" alt="" class="absolute">
                    </div>
                  </div>
                  <h3 class="text-gray-darker pt-14-xs hidden-xs hidden-sm">Resultados del tareo del mes de <span class="current-month">mayo</span> de <span class="current-year">2015</span></h3>
                  <h3 class="text-gray-darker pt-14-xs fz-28 lh-1-5 hidden-lg hidden-md">Resultados del tareo del mes de <span class="current-month">mayo</span> de <span class="current-year">2015</span></h3>
                  <div class="custom-calendar-wrap mt-42">
                    <div id="custom-inner" class="custom-inner pb-28">
                      <!--<div class="custom-header clearfix text-center">
                        <nav>
                          <span id="custom-prev" class="custom-prev"></span>
                          <span id="custom-next" class="custom-next"></span>
                        </nav>
                      </div>-->
                      <div id="calendar" class="fc-calendar-container pt-21">
                        <div class="text-center pb-14-xs">
                          <h3 id="custom-month" class="custom-month display-ib fz-18 mt-0 text-gray-light"></h3>
                          <h3 id="custom-year" class="custom-year display-ib fz-18 mt-0 text-gray-light pl-7"></h3>
                        </div>
                        <div class="fc-calendar fc-five-rows pt-7">
                          <div class="fc-head"></div>
                          <div class="fc-body">
                            <div class="fc-row">
                              <div>
                                <span class="fc-date"></span>
                                <span class="fc-weekday"></span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="day-colors clearfix display-ib relative">
                    <div>
                      <div class="color-turno brp-100 bg-info display-ib"></div>
                      <span class="serif text-gray-darker fz-11 pl-7">Asistencia turno diurno</span>
                    </div>
                    <div>
                      <div class="color-turno brp-100 bg-info-dark display-ib"></div>
                      <span class="serif text-gray-darker fz-11 pl-7">Asistencia turno nocturno</span>
                    </div>
                    <div>
                      <div class="color-turno brp-100 bg-danger display-ib"></div>
                      <span class="serif text-gray-darker fz-11 pl-7">Asistencia turno diurno</span>
                    </div>
                    <div>
                      <div class="color-turno brp-100 bg-danger-dark display-ib"></div>
                      <span class="serif text-gray-darker fz-11 pl-7">Asistencia turno nocturno</span>
                    </div>
                  </div>
                  <div id="tareo_detalle" class="detalle hidden mt-35">
                    
                  </div>
                  <div class="text-center mv-35"><a href="" class="btn-close border-bottom-gray-dark text-gray-dark le-1-5 light text-not-underline">Ver detalle</a></div>
                  <div class="text-center mv-35"><a href="" class="btn-close border-bottom-gray-dark text-gray-dark le-1-5 light text-not-underline hidden">Cerrar detalle</a></div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
    {embed=includes/radio-urbe clase="volumen"}
  </div>
  {embed=includes/footer}
  <script src="{site_url}frontend/app/assets/js/tareo-control.js"></script>
  <script src="{site_url}frontend/app/assets/js/collapse-control.js"></script>
  <script src="{site_url}frontend/app/assets/js/smooth-scroll.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="{site_url}frontend/app/assets/js/jquery.calendario.js"></script>
  <script src="{site_url}frontend/app/assets/js/data.js"></script>
  <script>
    $(function() {
    
      var transEndEventNames = {
          'WebkitTransition' : 'webkitTransitionEnd',
          'MozTransition' : 'transitionend',
          'OTransition' : 'oTransitionEnd',
          'msTransition' : 'MSTransitionEnd',
          'transition' : 'transitionend'
        },
        transEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ],
        $wrapper = $( '#custom-inner' ),
        $calendar = $( '#calendar' ),
        cal = $calendar.calendario( {
          onDayClick : function( $el, $contentEl, dateProperties ) {
            if( $contentEl.length > 0 ) {
              showEvents( $contentEl, dateProperties );
            }
          },
          caldata : null,
          weekabbrs : [ 'Dom', 'Lun', 'Mar', 'Mier', 'Jue', 'Vie', 'Sab' ],
          months : [ 'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Setiembre', 'Octubre', 'Noviembre', 'Diciembre' ],
          monthabbrs : [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],
          displayWeekAbbr : true
        } ),
        $month = $( '#custom-month' ).html( cal.getMonthName() ),
        $year = $( '#custom-year' ).html( cal.getYear() );
      $( '#custom-next' ).on( 'click', function() {
        cal.gotoNextMonth( updateMonthYear );
      } );
      $( '#custom-prev' ).on( 'click', function() {
        cal.gotoPreviousMonth( updateMonthYear );
      } );
      $( '#monthCollection' ).on( 'change', function(e) {
        cal.goto($(this).val(), $( '#yearCollection' ).val(), updateMonthYear );
      } );
      $( '#yearCollection' ).on( 'change', function(e) {
        cal.goto($( '#monthCollection' ).val(), $(this).val(), updateMonthYear );
      });
      function updateMonthYear() {   
        var month = cal.getMonthName();
        var year = cal.getYear();
        $month.html( month );
        $year.html( year );
        $(".current-month").text( month );
        $(".current-year").text( year );

        var mes = $("#monthCollection").val();

        $.ajax({
          type: 'GET',
          url: '{site_url}ws/tareo/' + mes + '/{segment_3}',
          success: function(data) {
            $("#tareo_detalle").html(data);
          }
        });
      }
      // just an example..
      function showEvents( $contentEl, dateProperties ) {
        hideEvents();
        
        var $events = $( '<div id="custom-content-reveal" class="custom-content-reveal"><h4>Events for ' + dateProperties.monthname + ' ' + dateProperties.day + ', ' + dateProperties.year + '</h4></div>' ),
          $close = $( '<span class="custom-content-close"></span>' ).on( 'click', hideEvents );
        $events.append( $contentEl.html() , $close ).insertAfter( $wrapper );
        
        setTimeout( function() {
          $events.css( 'top', '0%' );
        }, 25 );
      }
      function hideEvents() {
        var $events = $( '#custom-content-reveal' );
        if( $events.length > 0 ) {
          
          $events.css( 'top', '100%' );
          Modernizr.csstransitions ? $events.on( transEndEventName, function() { $( this ).remove(); } ) : $events.remove();
        }
      }
      updateMonthYear();
    });
  </script>
  <script>
      var currentMonth = new Date().getMonth();
      document.getElementById("monthCollection").value = currentMonth;
      var currentYear = new Date().getFullYear();
      var yearCollection = document.getElementById("yearCollection");
      var html = "";
      for (var i = 0; i <= 10; i++) {
        html += "<option value='" + (currentYear-i) + "' class='fz-14'>" + (currentYear-i) + "</option>";
      };
      yearCollection.innerHTML = html;
  </script>
</html>
